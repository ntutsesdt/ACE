package tw.edu.ntut.sdtlab.crawler.ace.util;

import org.dom4j.Document;
import org.dom4j.DocumentException;
import org.dom4j.DocumentHelper;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class XMLEventParserTest {
    @Test
    public void testGetNAFCount() throws DocumentException {
        String str = "<?xml version='1.0' encoding='UTF-8' standalone='yes' ?><hierarchy rotation=\"0\"><node index=\"0\" text=\"\" resource-id=\"\" class=\"android.widget.FrameLayout\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"false\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,0][1080,1776]\"><node index=\"0\" text=\"\" resource-id=\"\" class=\"android.widget.LinearLayout\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"false\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,0][1080,1776]\"><node index=\"0\" text=\"\" resource-id=\"android:id/title_container\" class=\"android.widget.RelativeLayout\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"false\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,75][1080,150]\"><node index=\"0\" text=\"Choose an activity\" resource-id=\"android:id/title\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"false\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[12,77][1068,145]\" /></node><node index=\"1\" text=\"\" resource-id=\"android:id/content\" class=\"android.widget.FrameLayout\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"false\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,150][1080,1776]\"><node index=\"0\" text=\"\" resource-id=\"android:id/list\" class=\"android.widget.ListView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"true\" focused=\"true\" scrollable=\"true\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,150][1080,1776]\"><node NAF=\"true\" index=\"0\" text=\"\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,150][1080,342]\" /><node NAF=\"true\" index=\"1\" text=\"\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,344][1080,536]\" /><node index=\"2\" text=\"「+」碼撥號\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,538][1080,730]\" /><node index=\"3\" text=\"「請勿打擾」存取權限\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,732][1080,924]\" /><node index=\"4\" text=\"01. SIP recorder\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,926][1080,1118]\" /><node index=\"5\" text=\"02. Touch Player\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,1120][1080,1312]\" /><node index=\"6\" text=\"03. Vibrator Test\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,1314][1080,1506]\" /><node index=\"7\" text=\"04. Input Type Tester\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,1508][1080,1700]\" /><node index=\"8\" text=\"05. SIP Touch Position Recorder\" resource-id=\"android:id/text1\" class=\"android.widget.TextView\" package=\"com.example.anycut\" content-desc=\"\" checkable=\"false\" checked=\"false\" clickable=\"true\" enabled=\"true\" focusable=\"false\" focused=\"false\" scrollable=\"false\" long-clickable=\"false\" password=\"false\" selected=\"false\" bounds=\"[0,1702][1080,1776]\" /></node></node></node></node></hierarchy>";
        Document document = DocumentHelper.parseText(str);
        XMLEventParser xmlEventParser = new XMLEventParser(document);
        assertEquals(2, xmlEventParser.getNAFCount());
    }
}
